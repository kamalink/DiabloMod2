<!DOCTYPE html>
<html lang="ru">
<head>
   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diablo III Mod UI</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <script src="data_economy.js"></script>
    <script src="data_guilds.js"></script>
    <script src="data_classes.js"></script>
    <script src="data_skills.js"></script>
    <script src="data_world.js"></script>
    <script src="logic_core.js"></script>
    <script src="logic_ui.js"></script>
    <script src="logic_game.js"></script>
    <script src="logic_calc.js"></script>
    <script src="logic_main.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles_components.css">
</head>
<body>

    <div id="breadcrumb">–ì–õ–ê–í–ù–ê–Ø</div>
    <div class="wallpaper"></div>

    <div class="menu-container rpg-entry-effect">
        <div class="header-title" id="menu-title">Diablo III Mod</div>
        <div id="buttons-area"></div>
    </div>

    <div id="text-window">
        <span class="close-x" onclick="closeWindow()">[X]</span>
        <h2 id="window-title"></h2>
        <div id="window-content"></div>
    </div>

    <button id="reset-btn" onclick="resetProgress()">üóëÔ∏è –°–¢–ï–†–ï–¢–¨ –í–°–ï</button>
    <button id="music-btn" onclick="toggleMusic()">üéµ –ú–£–ó–´–ö–ê</button>
    <input type="range" id="volume-slider" min="0" max="1" step="0.01" oninput="setVolume(this.value)" style="display: none; position: fixed; top: 55px; right: 310px; width: 100px; z-index: 1001;">
    <a href="#" onclick="event.preventDefault(); window.openIframe('https://randstuff.ru/number/');" id="randomizer-btn">üé≤ –†–ê–ù–î–û–ú</a>

    <!-- –í–∏–¥–∂–µ—Ç –∏–∑—É—á–µ–Ω–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ -->
    <div id="learned-skills-widget" style="position: fixed; top: 110px; right: 310px; width: 180px; max-height: 300px; overflow-y: auto; background: rgba(0,0,0,0.8); border: 1px solid #444; padding: 10px; color: #ccc; font-size: 0.75rem; z-index: 900; display: none; border-radius: 4px;">
        <div style="color: #d4af37; border-bottom: 1px solid #555; margin-bottom: 5px; font-weight: bold; text-align: center;">–ò–ó–£–ß–ï–ù–û</div>
        <div id="learned-skills-content"></div>
    </div>

    <button id="edit-char-btn" style="top: 60px;" onclick="toggleEditModal()">‚úçÔ∏è –ö–ù–ò–ì–ê –°–£–î–ï–ë</button>

    <!-- –û–∫–Ω–æ —Å–º–µ—Ä—Ç–∏ -->
    <div id="death-modal">
        <h2>‚ò†Ô∏è –°–ú–ï–†–¢–¨ –ì–ï–†–û–Ø</h2>
        <div id="death-modal-content"></div>
        <div id="death-modal-actions"></div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º—É–∑—ã–∫–∏ -->
    <div id="audio-container" style="position: fixed; bottom: 0; right: 0; width: 1px; height: 1px; opacity: 0; pointer-events: none;">
        <audio id="screamer-sound" src="screamer.mp3" preload="auto"></audio>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê –ù–ê–í–´–ö–û–í -->
    <div id="skill-calc-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 95%; max-width: 700px; max-height: 90vh; background: #1a1a1a; border: 2px solid #d4af37; z-index: 5000; padding: 20px; overflow-y: auto; box-shadow: 0 0 50px #000;">
        <h2 style="color: #d4af37; text-align: center; font-family: 'Cinzel', serif; margin-top: 0;">üßÆ –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –ù–ê–í–´–ö–û–í</h2>
        <span class="close-x" onclick="document.getElementById('skill-calc-modal').style.display='none'">[X]</span>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –í—ã–±–æ—Ä -->
            <div>
                <label style="color: #aaa;">–ö–ª–∞—Å—Å:</label>
                <select id="calc-class-select" class="d2-button" style="padding: 5px; margin: 5px 0;" onchange="updateCalcSkills()"></select>
                
                <label style="color: #aaa;">–ù–∞–≤—ã–∫:</label>
                <select id="calc-skill-select" class="d2-button" style="padding: 5px; margin: 5px 0;" onchange="updateCalcRunes()"></select>
                
                <label style="color: #aaa;">–†—É–Ω–∞:</label>
                <select id="calc-rune-select" class="d2-button" style="padding: 5px; margin: 5px 0;" onchange="loadCalcSkillData()"></select>
                
                <hr style="border-color: #333;">
                
                <div style="margin-bottom: 5px;"><span style="color: #66ccff;">‚öîÔ∏è –£—Ä–æ–Ω:</span> <span id="calc-dmg" style="color: #e0e0e0;">0</span>%</div>
                <div style="margin-bottom: 5px;"><span style="color: #a29bfe;">üéØ –û–±–ª–∞—Å—Ç—å:</span> <span id="calc-aoe" style="color: #e0e0e0;" data-value="1">-</span></div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –î–æ–ø –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
            <div>
                <div><span style="color: #ff7979;">‚ùÑÔ∏è –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ:</span> <span id="calc-slow" style="color: #e0e0e0;">0</span>%</div>
                <div><span style="color: #ff7979;">‚ö° –°—Ç–∞–Ω/–§—Ä–∏–∑:</span> <span id="calc-stun" style="color: #e0e0e0;">0</span> —Å–µ–∫</div>
                <div><span style="color: #66ff66;">‚ù§Ô∏è –õ–µ—á–µ–Ω–∏–µ:</span> <span id="calc-heal" style="color: #e0e0e0;">0</span>% HP</div>
                <div><span style="color: #ffd700;">üõ°Ô∏è –ë–∞—Ñ—Ñ –£—Ä–æ–Ω–∞:</span> <span id="calc-buff-dmg" style="color: #e0e0e0;">0</span>%</div>
                <div><span style="color: #ffd700;">üõ°Ô∏è –ë–∞—Ñ—Ñ –ó–∞—â–∏—Ç—ã:</span> <span id="calc-buff-def" style="color: #e0e0e0;">0</span>%</div>
                <div><span style="color: #a29bfe;">‚ö° –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span> <span id="calc-eff-inc" style="color: #e0e0e0;">0</span>%</div>
                <div><span style="color: #66ccff;">üåÄ –í–æ—Å—Å—Ç. —Ä–µ—Å—É—Ä—Å–∞:</span> <span id="calc-res-gain" style="color: #e0e0e0;">0</span></div>
                <input type="hidden" id="calc-buff-perm" value="false"> <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –±–∞—Ñ—Ñ–æ–≤ -->
                <input type="hidden" id="calc-buff-duration" value="0"> <!-- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞—Ñ—Ñ–∞ -->
                <input type="hidden" id="calc-dmg-amp" value="0"> <!-- –£—Å–∏–ª–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –ø–æ –≤—Ä–∞–≥–∞–º -->
                <input type="hidden" id="calc-dmg-2" value="0"> <!-- –í—Ç–æ—Ä–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —É—Ä–æ–Ω–∞ -->
                <input type="hidden" id="calc-aoe-2" value="1"> <!-- –û–±–ª–∞—Å—Ç—å –≤—Ç–æ—Ä–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ -->
                
                <div id="calc-synergy-box" style="display:none; margin-top:10px; border-top: 1px dashed #444; padding-top: 5px;">
                    <label style="color: #ff9900; font-size: 0.8rem;">‚öîÔ∏è –õ—É—á—à–∏–π –Ω–∞–≤—ã–∫ –∞—Ç–∞–∫–∏:</label>
                    <select id="calc-synergy-skill" class="d2-button" style="padding: 3px; font-size: 0.75rem; margin: 3px 0;" onchange="calculateSkillCost()"></select>
                </div>
                <input type="hidden" id="calc-cost-red-flat" value="0"> <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç (–ø–ª–æ—Å–∫–æ–µ) -->
                
                <div id="calc-skill-cost-box" style="display:none; margin-top:5px;">
                    <label style="color: #a29bfe;">üìâ –¶–µ–Ω–∞ –æ—Å–Ω. –Ω–∞–≤—ã–∫–∞:</label> <input type="number" id="calc-main-skill-cost" style="width: 80px;" value="0" oninput="calculateSkillCost()">
                </div>
            </div>
        </div>

        <div style="margin-top: 20px; text-align: center; border-top: 1px solid #5a0000; padding-top: 10px;">
            <div style="font-size: 1.5rem; color: #d4af37; display: flex; align-items: center; justify-content: center;">
                <span>–°–¢–û–ò–ú–û–°–¢–¨: <span id="calc-result" style="font-weight: bold; color: #fff;">0</span> üìñ</span>
                <button class="buy-skill-btn" onclick="buySkill()">–ò–ó–£–ß–ò–¢–¨</button>
            </div>
            <p id="calc-details" style="font-size: 0.8rem; color: #888; margin-top: 5px;"></p>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê –û–ü–´–¢–ê -->
    <div id="exp-calc-modal">
        <span class="close-x" onclick="document.getElementById('exp-calc-modal').style.display='none'">[X]</span>
        <h3>üìä –ü–û–î–°–ß–ï–¢ –û–ü–´–¢–ê</h3>
        
        <div class="exp-input-row">
            <label>üíÄ –ú–æ–±—ã:</label>
            <input type="number" id="exp-mobs" value="0" oninput="calculateExp()">
        </div>
        <div class="exp-input-row">
            <label>‚ò†Ô∏è –≠–ª–∏—Ç–∞:</label>
            <input type="number" id="exp-elites" value="0" oninput="calculateExp()">
        </div>
        <div class="exp-input-row">
            <label>üëπ –ë–æ—Å—Å—ã:</label>
            <input type="number" id="exp-bosses" value="0" oninput="calculateExp()">
        </div>

        <div class="exp-result-box" id="exp-result-display">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ...</div>
        <button class="exp-apply-btn" onclick="applyExpCalculation()">‚úÖ –ü–†–ò–ú–ï–ù–ò–¢–¨</button>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–û–ö–£–ü–ö–ò –ó–ê–ö–ï–ù–û–í -->
    <div id="zaken-buy-modal">
        <span class="close-x" onclick="document.getElementById('zaken-buy-modal').style.display='none'">[X]</span>
        <h3>üí∞ –ü–û–ö–£–ü–ö–ê –ó–ê–ö–ï–ù–û–í</h3>
        <p id="zaken-price-display" style="color: #aaa; font-size: 0.9rem;"></p>
        
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label><br>
        <input type="number" id="zaken-count-input" value="1" min="1" oninput="updateZakenTotalCost()">
        <div id="zaken-total-cost" style="margin: 10px 0; font-weight: bold; color: #ffd700;">–ò—Ç–æ–≥–æ: 0ü•à</div>
        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <button id="btn-confirm-buy" class="zaken-buy-btn" onclick="confirmBuyZakens()">–ö–£–ü–ò–¢–¨</button>
            <button id="btn-confirm-sell" class="zaken-sell-btn" onclick="confirmSellZakens()">–ü–†–û–î–ê–¢–¨</button>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –í–í–û–î–ê –ß–ò–°–õ–ê -->
    <div id="custom-prompt-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9990; align-items: center; justify-content: center;">
        <div id="prompt-content" style="width: 90%; max-width: 400px; background: linear-gradient(160deg, #1a0505 0%, #000 100%); border: 2px solid #d4af37; box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); padding: 25px; text-align: center; font-family: 'Cinzel', serif; color: #e0e0e0;">
            <h3 id="prompt-title" style="color: #d4af37; margin-top: 0; font-size: 1.5rem;"></h3>
            <p id="prompt-text" style="font-family: 'Lora', serif; font-size: 1.1rem; margin: 20px 0; line-height: 1.5;"></p>
            <input type="number" id="prompt-input" value="1" min="1" style="width: 100px; padding: 8px; background: #000; border: 1px solid #444; color: #fff; text-align: center; font-size: 1.2rem; margin-bottom: 20px;">
            <div id="prompt-buttons" style="display: flex; justify-content: center; gap: 15px;">
                <button id="prompt-ok-btn" class="death-confirm-btn" style="background: #5a0000; border-color: #d4af37; min-width: 100px;">OK</button>
                <button id="prompt-cancel-btn" class="death-cancel-btn" style="min-width: 100px;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–î–ê–ñ–ò –ö–†–ê–§–¢–ê -->
    <div id="sell-craft-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 95%; max-width: 600px; max-height: 90vh; background: #1a1a1a; border: 2px solid #d4af37; z-index: 6000; padding: 20px; overflow-y: auto; box-shadow: 0 0 50px #000;">
        <h2 style="color: #d4af37; text-align: center; font-family: 'Cinzel', serif; margin-top: 0;">–ü—Ä–æ–¥–∞–∂–∞ –∫—Ä–∞—Ñ—á–µ–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞</h2>
        <span class="close-x" onclick="document.getElementById('sell-craft-modal').style.display='none'">[X]</span>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
            <div>
                <label>–£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ–¥–º–µ—Ç–∞: <input type="number" id="craft-sell-level" value="1" min="1" oninput="calculateCraftedSellPrice()" style="width: 60px;"></label>
            </div>
            <div>
                <label>–ì—Ä–µ–π–¥: 
                    <select id="craft-sell-grade" onchange="calculateCraftedSellPrice()" style="margin-right: 10px;">
                        <option value="N">N (üìì)</option>
                        <option value="DC">D/C (üìòüìí)</option>
                        <option value="B">B (üìô)</option>
                        <option value="A">A (üìï)</option>
                        <option value="S">S (–î—Ä–µ–≤–Ω–∏–π)</option>
                        <option value="S+">S+ (–ö–æ–º–ø–ª–µ–∫—Ç)</option>
                        <option value="Spectrum">Spectrum</option>
                    </select>
                </label>
                <span id="craft-sell-guild-bonus" style="font-size: 0.8rem; color: #66ff66;"></span>
            </div>
        </div>

        <div id="craft-sell-properties" style="background: rgba(0,0,0,0.2); border: 1px solid #333; padding: 10px; max-height: 200px; overflow-y: auto; margin-bottom: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
            <!-- –°–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>

        <div id="craft-sell-total" style="text-align: center; font-size: 1.4rem; color: #ffd700; margin: 20px 0; font-family: 'Cinzel', serif;">–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞: 0 üßß</div>
        
        <div style="text-align: center;"><button class="death-confirm-btn" onclick="confirmSellCraftedItem()">–ü–†–û–î–ê–¢–¨</button></div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –£–°–õ–£–ì –Æ–í–ï–õ–ò–†–ê -->
    <div id="gem-service-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 7000; align-items: center; justify-content: center;">
        <div style="width: 90%; max-width: 450px; background: linear-gradient(160deg, #1a0505 0%, #000 100%); border: 2px solid #d4af37; box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); padding: 25px; text-align: center; font-family: 'Cinzel', serif; color: #e0e0e0;">
            <h3 id="gem-service-title" style="color: #d4af37; margin-top: 0; font-size: 1.5rem;">–£—Å–ª—É–≥–∏ —é–≤–µ–ª–∏—Ä–∞</h3>
            <div id="gem-service-inputs" style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                <label>–†–∞–Ω–≥ üíé (1-10): <input type="number" id="gem-rank-input" value="1" min="1" max="10" style="width: 80px; padding: 5px; background: #000; border: 1px solid #444; color: #fff;"></label>
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: <input type="number" id="gem-quantity-input" value="1" min="1" style="width: 80px; padding: 5px; background: #000; border: 1px solid #444; color: #fff;"></label>
                <label id="gem-rent-duration-box" style="display:none;">–ù–∞ —Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π: <input type="number" id="gem-rent-duration" value="1" min="1" style="width: 80px; padding: 5px; background: #000; border: 1px solid #444; color: #fff;"></label>
                <div id="gem-item-type-selector" style="display: flex; gap: 15px; justify-content: center; margin-top: 5px; font-size: 0.9rem;">
                    <label style="cursor: pointer;"><input type="radio" name="gem-item-type" value="1" checked> –û—Ä—É–∂–∏–µ (—Ö1)</label>
                    <label style="cursor: pointer;"><input type="radio" name="gem-item-type" value="0.5"> –î—Ä—É–≥–æ–µ (—Ö0.5)</label>
                </div>
            </div>
            <div id="gem-service-buttons" style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
                <!-- Buttons will be generated here by JS -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–î–ê–ñ–ò –†–ï–°–£–†–°–û–í -->
    <div id="multi-sell-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 7000; align-items: center; justify-content: center;">
        <div style="width: 90%; max-width: 450px; background: linear-gradient(160deg, #1a0505 0%, #000 100%); border: 2px solid #d4af37; box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); padding: 25px; text-align: center; font-family: 'Cinzel', serif; color: #e0e0e0;">
            <h3 id="multi-sell-title" style="color: #d4af37; margin-top: 0; font-size: 1.5rem;">–ü—Ä–æ–¥–∞–∂–∞ —Ä–µ—Å—É—Ä—Å–æ–≤</h3>
            <div style="margin-bottom: 15px;">
                <label>–£—Ä–æ–≤–µ–Ω—å —Ä–µ—Å—É—Ä—Å–æ–≤: <input type="number" id="multi-sell-level" value="1" min="1" style="width: 80px; padding: 5px; background: #000; border: 1px solid #444; color: #fff;"></label>
            </div>
            <div id="multi-sell-inputs" style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0; text-align: left;">
                <!-- Inputs will be generated here by JS -->
            </div>
            <div id="multi-sell-total" style="font-size: 1.2rem; color: #ffd700; margin-bottom: 20px;">–ò—Ç–æ–≥–æ: 0 üßß</div>
            <div style="display: flex; justify-content: center; gap: 15px;">
                <button id="multi-sell-ok-btn" class="death-confirm-btn">–ü—Ä–æ–¥–∞—Ç—å</button>
                <button id="multi-sell-cancel-btn" class="death-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û IFRAME (–í–Ω–µ—à–Ω–∏–µ —Å–∞–π—Ç—ã) -->
    <div id="iframe-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9995; align-items: center; justify-content: center;">
        <div style="width: 95%; height: 90%; position: relative; background: #000; border: 2px solid #d4af37;">
            <span class="close-x" onclick="document.getElementById('iframe-modal').style.display='none'" style="position: absolute; top: -35px; right: 0; color: #fff; font-size: 2rem;">[X]</span>
            <iframe id="web-frame" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>

    <!-- –û–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (Generic) -->
    <div id="custom-confirm-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9990;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 400px; background: linear-gradient(160deg, #1a0505 0%, #000 100%); border: 2px solid #d4af37; box-shadow: 0 0 30px rgba(212, 175, 55, 0.2), inset 0 0 50px rgba(50, 20, 0, 0.5); padding: 25px; text-align: center; font-family: 'Cinzel', serif; font-weight: 700; color: #e0e0e0; border-radius: 4px;">
            <h3 id="confirm-title" style="color: #d4af37; margin-top: 0; text-shadow: 0 0 10px #500; font-size: 1.5rem;">‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï</h3>
            <div id="confirm-message" style="font-family: 'Lora', serif; font-size: 1.1rem; margin: 20px 0; line-height: 1.5;"></div>
            <div style="display: flex; justify-content: center; gap: 15px;">
                <button id="confirm-yes-btn" class="death-confirm-btn" style="background: #5a0000; border-color: #d4af37; min-width: 100px;">–î–ê</button>
                <button id="confirm-no-btn" class="death-cancel-btn" style="min-width: 100px;">–û–¢–ú–ï–ù–ê</button>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <div id="mobile-nav-bar">
        <button class="mobile-nav-btn" onclick="toggleMobilePanel('char-sheet', this)">üë§ –ì–ï–†–û–ô</button>
        <button class="mobile-nav-btn" onclick="toggleMobilePanel('right-panels-stack', this)">üìú –ë–û–ù–£–°–´</button>
        <button class="mobile-nav-btn" onclick="toggleEditModal()">‚úçÔ∏è –ö–ù–ò–ì–ê</button>
    </div>

<div id="char-sheet">
    <div style="text-align: center; color: #d4af37; font-size: 1.2rem; margin-bottom: 10px;" id="view-name">–ù–ï–§–ê–õ–ï–ú</div>
    <div id="view-ladder-rank" style="text-align: center; color: #ff4444; font-size: 0.9rem; margin-bottom: 10px; font-weight: bold; display: none;"></div>
    
    <div class="stat-group">
        <div class="stat-group-title">–ö—É–± (–ü–µ–Ω—Ç–æ–≥—Ä–∞–º–º–∞)</div>
        <div style="text-align: center; margin-top: 5px; display: flex; justify-content: center; gap: 5px;">
            <div id="slot-penta-1" class="penta-slot" title="–°–ª–æ—Ç 1 (25 –í–ü)"></div>
            <div id="slot-penta-2" class="penta-slot" title="–°–ª–æ—Ç 2 (60 –í–ü)"></div>
            <div id="slot-penta-3" class="penta-slot" title="–°–ª–æ—Ç 3 (100 –í–ü)"></div>
        </div>
    </div>

    <div class="stat-group">
        <div class="stat-group-title">–ì–µ—Ä–æ–π & –ë–∏–ª–¥</div>
        <div class="stat-row"><span id="view-class">–ö–ª–∞—Å—Å –Ω–µ –≤—ã–±—Ä–∞–Ω</span> <span id="view-build" style="font-size:0.7rem;"></span></div>
        <div class="stat-row">–£—Ä–æ–≤–µ–Ω—å: <span id="view-lvl" class="stat-value">1</span></div>
        <div class="stat-row">–ó–µ–ª—å—è: <span id="view-potions" class="stat-value">5</span> üíä <span id="view-potion-price" style="font-size: 0.7rem;"></span></div>
        <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≥–∏–ª—å–¥–∏–π -->
        <div class="stat-row" id="view-stat-str-row">–°–∏–ª–∞: <span id="view-stat-str" class="stat-value">0</span> üèÆ</div>
        <div class="stat-row" id="view-stat-dex-row">–õ–æ–≤–∫–æ—Å—Ç—å: <span id="view-stat-dex" class="stat-value">0</span> ü•¢</div>
        <div class="stat-row" id="view-stat-int-row">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="view-stat-int" class="stat-value">0</span> üîÆ</div>
        <div class="stat-row" id="view-stat-vit-row">–ñ–∏–≤—É—á–µ—Å—Ç—å: <span id="view-stat-vit" class="stat-value">0</span> ‚õëÔ∏è</div>
        <div class="stat-row">–ú–∞–∫—Å –í–ü: <span id="view-max-vp" class="stat-value">0</span> üèõÔ∏è</div>
    </div>

    <div class="stat-group">
        <div class="stat-group-title">–§–∏–Ω–∞–Ω—Å—ã</div>
        <div class="money-row">
            <span class="money-unit"><span id="view-gold-g">0</span>ü•á</span>
            <span class="money-unit"><span id="view-gold-s">0</span>ü•à</span>
            <span class="money-unit"><span id="view-gold-c">0</span>ü•â</span>
            <span class="money-unit"><span id="view-gold-y">0</span>üßß</span>
        </div>
    <div class="stat-row" style="margin-top:8px;">–†—É–Ω—ã: <span id="view-runes" class="stat-value">0</span> üìñ</div>
        <div class="stat-row">–ü–∞—Ä–∞–≥–æ–Ω: <span id="view-para" class="stat-value">0</span> ‚è≥</div>
    <div class="stat-row">–ó–∞–∫–µ–Ω—ã: <span id="view-zakens" class="stat-value">0</span> üîñ <span id="view-zaken-discount" style="font-size: 0.7rem;"></span></div>
    </div>

    <div class="stat-group">
        <div class="stat-group-title">–ì–∏–ª—å–¥–∏—è & –†–∞–Ω–≥</div>
        <div class="stat-row">–ü—Ä–æ—Ñ–µ—Å—Å–∏—è: <span id="view-profession" class="stat-value">–ù–µ—Ç</span></div>
        <div class="stat-row">–û—Ä–¥–µ–Ω: <span id="view-guild" class="stat-value">–ù–µ—Ç</span></div>
        <div class="stat-row">–†–∞–Ω–≥: <span id="view-rank" class="stat-value">0</span> üßæ</div>
        <div class="stat-row">–ü—Ä–æ–¥–∞–Ω–æ —Ä—É–Ω: <span id="view-runes-sold" class="stat-value">0</span> üìñ</div>
        <div class="stat-row">–†–µ–ø—É—Ç–∞—Ü–∏—è: <span id="view-reputation" class="stat-value">0</span> üé≠</div>
        <div class="stat-row">–°–¥–µ–ª–∫–∏: <span id="view-deals" class="stat-value">0</span> ü§ù</div>
        <div class="stat-row">–°—É–Ω–¥—É–∫–∏: <span id="view-chests" class="stat-value">0</span> üì¶</div>
    </div>

    <div class="stat-group">
        <div class="stat-row">–ö—É–ø–ª–µ–Ω–æ –Ω–∞ –ß–†: <span id="view-black-market" class="stat-value">0</span> üï∂Ô∏è</div>
        <div class="stat-row">–£–∫—Ä–∞–¥–µ–Ω–æ: <span id="view-steals" class="stat-value">0</span> <span id="view-theft-fine" style="font-size: 0.6rem;"></span></div>
    </div>

    <div class="stat-group">
        <div class="stat-group-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ & –õ—É—Ç</div>
        <div class="stat-row">–£–±–∏—Ç–æ –º–æ–±–æ–≤: <span id="view-kills" class="stat-value">0</span> üíÄ</div>
        <div class="stat-row">–≠–ª–∏—Ç–∞ (—Å–æ–ª–æ): <span id="view-elites-solo" class="stat-value">0</span> ‚ò†Ô∏è</div>
        <div class="stat-row">–ë–æ—Å—Å—ã: <span id="view-bosses" class="stat-value">0</span> üëπ</div>
        <div class="stat-row">–ì–æ–±–ª–∏–Ω—ã: <span id="view-gobs-solo" class="stat-value">0</span>(–°) / <span id="view-gobs-assist" class="stat-value">0</span>(–ü)</div>
        <div class="stat-row">–ù–∞–π–¥–µ–Ω–æ –õ–µ–≥: <span id="view-found-legs" class="stat-value">0</span> üìô</div>
        <div class="stat-row">–ù–∞–π–¥–µ–Ω–æ –ñ–µ–ª—Ç—ã—Ö: <span id="view-found-yellows" class="stat-value">0</span> üìí</div>
        <div class="stat-row">–†–µ—Å—É—Ä—Å—ã: <span id="view-res-n" class="stat-value">0</span>üìì <span id="view-res-dc" class="stat-value">0</span>üìòüìí <span id="view-res-b" class="stat-value">0</span>üìô <span id="view-res-a" class="stat-value">0</span>üìï</div>
        <div class="stat-row">–†–µ–∞–≥–µ–Ω—Ç—ã: <span id="view-reagents" class="stat-value">0</span></div>
        <div class="stat-row">–î—ã—Ö–∞–Ω–∏–µ —Å–º–µ—Ä—Ç–∏: <span id="view-death-breath" class="stat-value">0</span> üß™</div>
        <div class="stat-row" style="font-size: 0.7rem;">–ü–æ—Ä—Ç–∞–ª 70: <span id="view-lvl70-portal">-</span></div>
    </div>
</div>

<div id="edit-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1a1a1a; border: 3px solid #d4af37; padding: 20px; z-index: 2000; color: white; font-family: 'Lora', serif; width: 600px; max-height: 90vh; overflow-y: auto;">
    <h2 style="color:#d4af37; text-align:center;">–ö–ù–ò–ì–ê –°–£–î–ï–ë</h2>
    
    <div class="edit-grid">
        <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->
        <div style="display: flex; flex-direction: column; gap: 8px;">
            <h4 style="color: #66ccff; margin: 0;">–û–°–ù–û–í–ù–û–ï</h4>
            <label>–ò–º—è: <input type="text" id="input-name" style="width: 100%;"></label>
            <label>–ö–ª–∞—Å—Å: 
                <select id="input-class" style="width: 100%; background: #333; color: white; border: 1px solid #555;">
                    <option value="–ö–ª–∞—Å—Å –Ω–µ –≤—ã–±—Ä–∞–Ω">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
                    <option value="–í–∞—Ä–≤–∞—Ä">–í–∞—Ä–≤–∞—Ä</option>
                    <option value="–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü">–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü</option>
                    <option value="–û—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –¥–µ–º–æ–Ω–æ–≤">–û—Ö–æ—Ç–Ω–∏–∫ –Ω–∞ –¥–µ–º–æ–Ω–æ–≤</option>
                    <option value="–ú–æ–Ω–∞—Ö">–ú–æ–Ω–∞—Ö</option>
                    <option value="–ö–æ–ª–¥—É–Ω">–ö–æ–ª–¥—É–Ω</option>
                    <option value="–ß–∞—Ä–æ–¥–µ–π">–ß–∞—Ä–æ–¥–µ–π</option>
                </select>
            </label>
            <label>–£—Ä–æ–≤–µ–Ω—å üåí: <input type="number" step="0.1" id="input-lvl" style="width: 60px;"></label>
            <label>–ó–µ–ª—å—è üíä: <input type="number" id="input-potions" style="width: 60px;"></label>
            
            <!-- –ü–æ–ª—è "–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ" (—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –µ—Å–ª–∏ > 0) -->
            <div id="input-base-kills-box"><label>–ò–∑–Ω–∞—á. –º–æ–±–æ–≤: <input type="number" id="input-base-kills" style="width: 60px;"></label></div>
            <div id="input-base-elites-box"><label>–ò–∑–Ω–∞—á. —ç–ª–∏—Ç–æ–∫: <input type="number" id="input-base-elites" style="width: 60px;"></label></div>
            
            <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≥–∏–ª—å–¥–∏–π (—Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div id="input-stat-str-box"><label>–°–∏–ª–∞ üèÆ: <input type="number" id="input-stat-str" style="width: 60px;"></label></div>
            <div id="input-stat-dex-box"><label>–õ–æ–≤–∫–æ—Å—Ç—å ü•¢: <input type="number" id="input-stat-dex" style="width: 60px;"></label></div>
            <div id="input-stat-int-box"><label>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç üîÆ: <input type="number" id="input-stat-int" style="width: 60px;"></label></div>
            <div id="input-stat-vit-box"><label>–ñ–∏–≤—É—á–µ—Å—Ç—å ‚õëÔ∏è: <input type="number" id="input-stat-vit" style="width: 60px;"></label></div>
            
            <h4 style="color: #ffd700; margin: 5px 0 0 0;">–§–ò–ù–ê–ù–°–´</h4>
            <label>–ó–æ–ª–æ—Ç–æ ü•á: <input type="number" step="0.1" id="input-gold-g" style="width: 60px;"></label>
            <label>–ó–æ–ª–æ—Ç–æ ü•à: <input type="number" step="0.1" id="input-gold-s" style="width: 60px;"></label>
            <label>–ó–æ–ª–æ—Ç–æ ü•â: <input type="number" step="0.1" id="input-gold-c" style="width: 60px;"></label>
            <label>–ó–æ–ª–æ—Ç–æ üßß: <input type="number" step="0.1" id="input-gold-y" style="width: 60px;"></label>
            <label>–†—É–Ω—ã üìñ: <input type="number" step="0.1" id="input-runes" style="width: 60px;"></label>
            <label>–ü–∞—Ä–∞–≥–æ–Ω ‚è≥: <input type="number" step="0.1" id="input-para" style="width: 60px;"></label>
            <label>–ó–∞–∫–µ–Ω—ã üîñ: <input type="number" id="input-zakens" style="width: 60px;"></label>

            <h4 style="color: #ff7979; margin: 5px 0 0 0;">–ë–û–ô –ò –ü–†–û–ì–†–ï–°–°</h4>
            <label>–ú–æ–±—ã üíÄ: <input type="number" id="input-kills" style="width: 80px;"></label>
            <label>–≠–ª–∏—Ç–∞ (–°–∞–º) ‚ò†Ô∏è: <input type="number" id="input-elites-solo" style="width: 80px;"></label>
            <label>–ë–æ—Å—Å—ã üëπ: <input type="number" id="input-bosses" style="width: 80px;"></label>
            <label>–ì–æ–±–ª–∏–Ω—ã (–°–∞–º) ‚≠ê: <input type="number" id="input-gobs-solo" style="width: 80px;"></label>
            <label>–ì–æ–±–ª–∏–Ω—ã (–ü–æ–º–æ—â—å) ü§ù: <input type="number" id="input-gobs-assist" style="width: 80px;"></label>
            <label>–ú–∞–∫—Å –í–ü üèõÔ∏è: <input type="number" id="input-max-vp" style="width: 60px;"></label>
            <label>–ü–æ—Ä—Ç–∞–ª 70 —É—Ä.: <input type="number" id="input-lvl70-portal" style="width: 60px;"></label>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->
        <div style="display: flex; flex-direction: column; gap: 8px;">
            <h4 style="color: #a29bfe; margin: 0;">–õ–£–¢ –ò –†–ï–°–£–†–°–´</h4>
            <label>–ù–∞–π–¥–µ–Ω–æ –õ–µ–≥ üìô: <input type="number" id="input-found-legs" style="width: 60px;"></label>
            <label>–ù–∞–π–¥–µ–Ω–æ –ñ–µ–ª—Ç—ã—Ö üìí: <input type="number" id="input-found-yellows" style="width: 60px;"></label>
            <label>–î—ã—Ö–∞–Ω–∏–µ —Å–º–µ—Ä—Ç–∏ üß™: <input type="number" id="input-death-breath" style="width: 60px;"></label>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; flex-wrap: wrap; align-items: center;">
                <label style="font-size: 0.9rem;">üìì: <input type="number" id="input-res-n" style="width: 40px;"></label>
                <label style="font-size: 0.9rem;">üìòüìí: <input type="number" id="input-res-dc" style="width: 40px;"></label>
                <label style="font-size: 0.9rem;">üìô: <input type="number" id="input-res-b" style="width: 40px;"></label>
                <label style="font-size: 0.9rem;">üìï: <input type="number" id="input-res-a" style="width: 40px;"></label>
            </div>
            <label>–†–µ–∞–≥–µ–Ω—Ç—ã: <input type="number" id="input-reagents" style="width: 60px;"></label>

            <h4 style="color: #55efc4; margin: 5px 0 0 0;">–ì–ò–õ–¨–î–ò–Ø –ò –¢–ï–ù–¨</h4>
            <label>–ü—Ä–æ–¥–∞–Ω–æ –†—É–Ω üìñ: <input type="number" step="0.1" id="input-runes-sold" style="width: 60px;"></label>
            <label>–†–µ–ø—É—Ç–∞—Ü–∏—è üé≠: <input type="number" id="input-reputation" style="width: 60px;"></label>
            <label>–°–¥–µ–ª–∫–∏ : <input type="number" id="input-deals" style="width: 60px;"></label>
            <label>–°—É–Ω–¥—É–∫–∏ üì¶: <input type="number" id="input-chests" style="width: 60px;"></label>
            <label>–£–∫—Ä–∞–¥–µ–Ω–æ: <input type="number" id="input-steals" style="width: 60px;"></label>
            <label>–ö—É–ø–ª–µ–Ω–æ –Ω–∞ –ß–† üï∂Ô∏è: <input type="number" id="input-black-market" style="width: 60px;"></label>
        </div>
    </div>
        
    <div style="margin-top: 20px; text-align: center;">
        <button onclick="savePlayerData()" style="background: #d4af37; color: black; padding: 10px 20px; border: none; cursor: pointer; font-weight: bold; margin-right: 10px;">–°–û–•–†–ê–ù–ò–¢–¨</button>
        <button onclick="toggleEditModal()" style="background: #5a0000; color: white; padding: 10px 20px; border: none; cursor: pointer;">–û–¢–ú–ï–ù–ê</button>
    </div>
</div>

<div id="right-panels-stack" style="position: fixed; right: 15px; top: 120px; width: 240px; z-index: 3000; display: flex; flex-direction: column; gap: 10px;">
    
    <!-- –°–≤–∏—Ç–æ–∫ –ì–ò–õ–¨–î–ò–ò -->
    <div id="active-guild-bonus" class="right-panel-bonus" style="display: none; background: linear-gradient(180deg, #1a1a1a 0%, #050505 100%); border: 1px solid #d4af37; padding: 12px; color: #e0e0e0; font-family: 'Marcellus', serif; box-shadow: 0 5px 15px rgba(0,0,0,0.8); border-radius: 2px;">
        <h4 id="bonus-guild-name" style="margin: 0 0 10px 0; color: #d4af37; text-align: center; border-bottom: 1px solid #5a0000; font-size: 0.9rem;">–ì–ò–õ–¨–î–ò–Ø</h4>
        <div id="bonus-content" style="font-size: 0.7rem;"></div>
    </div>

    <!-- –°–≤–∏—Ç–æ–∫ –ö–õ–ê–°–°–ê -->
    <div id="active-class-bonus" class="right-panel-bonus" style="display: none; background: linear-gradient(180deg, #1a1a1a 0%, #0a0a1a 100%); border: 1px solid #66ccff; padding: 12px; color: #e0e0e0; font-family: 'Marcellus', serif; box-shadow: 0 5px 15px rgba(0,0,0,0.8); border-radius: 2px;">
        <h4 id="bonus-class-name" style="margin: 0 0 10px 0; color: #66ccff; text-align: center; border-bottom: 1px solid #003366; font-size: 0.9rem;">–ë–ò–õ–î</h4>
        <div id="class-bonus-content" style="font-size: 0.7rem;"></div>
    </div>

</div>

<!-- –≠–ö–†–ê–ù –ë–ï–ó–î–ï–ô–°–¢–í–ò–Ø (DIABLO) -->
<div id="idle-screen">
        <img id="idle-diablo-img" src="https://upload.wikimedia.org/wikipedia/en/d/d5/Diablo_III_cover.png" onerror="this.style.display='none'" alt="Diablo">
    <div class="fire-wrapper">
        <h1 class="fire-text">–ó–õ–û –ù–ï –î–†–ï–ú–õ–ï–¢...</h1>
        <div class="spark spark-1"></div>
        <div class="spark spark-2"></div>
        <div class="spark spark-3"></div>
        <div class="spark spark-4"></div>
        <div class="spark spark-5"></div>
        <div class="spark spark-6"></div>
    </div>
</div>

</body>
</html>
